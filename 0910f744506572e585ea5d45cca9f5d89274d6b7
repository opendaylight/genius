{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_101cd876",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 30,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-10-25T09:19:04Z",
      "side": 1,
      "message": "shouldn\u0027t it be still keep instance as singleton though it has reference to same infrautils jc delegate.",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_fb55a5c6",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 30,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-10-25T10:15:09Z",
      "side": 1,
      "message": "you mean remove the static here?  How? Because getInstance() is static and that can\u0027t (easily) be changed, right?",
      "parentUuid": "9a245df4_101cd876",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_b00cec43",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 33,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-10-25T09:19:04Z",
      "side": 1,
      "message": "it\u0027s not threadsafe here.",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_5b13110d",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 33,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-10-25T10:15:09Z",
      "side": 1,
      "message": "yeah.. so shall I just mark this getInstance() method as \"synchronized\", would that work for you? Tom, OK?  PS: I did just briefly try to make the field pre-initialized:\n\n  private static DataStoreJobCoordinator instance \u003d new DataStoreJobCoordinator(Activator.getJobCoordinator(), Activator.getJobCoordinatorMonitor());\n\n  public static DataStoreJobCoordinator getInstance() {\n        if (instance \u003d\u003d null) {\n            throw new IllegalStateException(\"...\");\n        }\n        return instance;\n    }\n\nbut that\u0027s not that easy, and will fail e.g. TestableJobCoordinatorEventsWaiterTest (and others), because JobCoordinatorTestModule expects to be able to \"control\" DataStoreJobCoordinator, so it should not already have an instance set by itself.\n\nBTW: Peri please remember that this is intended to be very temporary; Tom is already actively working on patches to get all static usages of DataStoreJobCoordinator replaced by real JobCoordinator di use, so we\u0027re hoping to completely removed DataStoreJobCoordinator... soon-ish.",
      "parentUuid": "9a245df4_b00cec43",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_5becb18f",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 33,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-10-25T11:56:26Z",
      "side": 1,
      "message": "okay, i see test modules need its own DataStoreJobCoordinator. \nThen let us go ahead with making getInstance() method as \"synchronized\".",
      "parentUuid": "9a245df4_5b13110d",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_bb020d3c",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 33,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-25T12:07:02Z",
      "side": 1,
      "message": "yeah - just make the method synchronized",
      "parentUuid": "9a245df4_5b13110d",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_dbf70158",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 89,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-25T12:07:02Z",
      "side": 1,
      "message": "No implementation here",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_3683d457",
        "filename": "mdsalutil/mdsalutil-api/src/main/java/org/opendaylight/genius/datastoreutils/DataStoreJobCoordinator.java",
        "patchSetId": 16
      },
      "lineNbr": 89,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-10-25T13:12:55Z",
      "side": 1,
      "message": "sorry, don\u0027t understand this review feedback - how do you mean?  This forwards to org.opendaylight.infrautils.jobcoordinator.internal.JobCoordinatorImpl.enqueueJob(String, Callable\u003cList\u003cListenableFuture\u003cVoid\u003e\u003e\u003e, int), which *IS* implemented.. what are you suggesting that I\u0027m not getting?",
      "parentUuid": "9a245df4_dbf70158",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_1b99991f",
        "filename": "mdsalutil/mdsalutil-testutils/src/main/java/org/opendaylight/genius/datastoreutils/testutils/TestableJobCoordinatorEventsWaiter.java",
        "patchSetId": 16
      },
      "lineNbr": 25,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-25T12:07:02Z",
      "side": 1,
      "message": "Why suppress deprecation?",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_7ba09543",
        "filename": "mdsalutil/mdsalutil-testutils/src/main/java/org/opendaylight/genius/datastoreutils/testutils/TestableJobCoordinatorEventsWaiter.java",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1842
      },
      "writtenOn": "2017-10-25T12:07:02Z",
      "side": 1,
      "message": "I think I had tried this but tests failed somewhere.",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_9691e09c",
        "filename": "mdsalutil/mdsalutil-testutils/src/main/java/org/opendaylight/genius/datastoreutils/testutils/TestableJobCoordinatorEventsWaiter.java",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 5867
      },
      "writtenOn": "2017-10-25T13:12:55Z",
      "side": 1,
      "message": "Nope, it actually does work, see TestableJobCoordinatorEventsWaiterTest which tests this, and that\u0027s because the JobCoordinatorTestModule does the correct bind() ... OK for you, no objection?",
      "parentUuid": "9a245df4_7ba09543",
      "revId": "0910f744506572e585ea5d45cca9f5d89274d6b7",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}