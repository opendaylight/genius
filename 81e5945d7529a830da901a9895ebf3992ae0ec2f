{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_bce2279d",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T05:25:42Z",
      "side": 1,
      "message": "I hope parent-refs is just used to contain logical tunnel name in each member tunnel interface. so we might need to use interface-child-info to contain all the member tunnel interfaces for the given logical tunnel group. This simplifies in programming the OF select group.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_3fbaa9de",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "Yes. It should contain just the name of the tunnel members.\nCheck out my reply to https://git.opendaylight.org/gerrit/#/c/50779/12/docs/specs/multiple-vxlan-tunnels.rst@238",
      "parentUuid": "fafc7978_bce2279d",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_1c96d3f0",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 79,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T05:25:42Z",
      "side": 1,
      "message": "I think even for single tunnel, we can go ahead with creating logical group interface with OF select group with single bucket. This way we can make applications to always work on logical group interface name.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_bf5fb90d",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 79,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "I agree this would make the pipeline uniform but it might have an unnecessary performance penalty considering the ordinary UC is a single tunnel.\n\nIs anyone else supporting this?",
      "parentUuid": "fafc7978_1c96d3f0",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5c6e9b02",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T06:00:18Z",
      "side": 1,
      "message": "The current odl-fib is implemented to have only one tep-ip-address for the given prefix in vrfEntry. \nWe need to decide whether to have remote dpId or remote-ip-list as nexthop.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_bfe4d93b",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "These are part of the changes that needs to be made on the netvirt side to support this.\nI added the remote DPN id to getInternalOrExternalInterfaceName in order to get the logical tunnel name but I\u0027m not sure additional model changes would be required.\nodl-l3vpn:prefix-to-interface already contains the mapping vpn-id+dst-prefix -\u003e dpn-id and is already in use by the FIB layer so dpn-id could be extracted from there.\nRegarding the nexthop-list in the vrfEntry/vpnInterface I\u0027m not sure. \nNexthop-list shouldn\u0027t be used anymore if dpn-id is found in prefix-to-interface but what should it\u0027s value reflect? the dpn-id? the list of all possible underlay ip addresses? the first underlay ip (like today)?\nI don\u0027t want to make a big change in this model if it\u0027s just for cosmetic reasons",
      "parentUuid": "fafc7978_5c6e9b02",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_02530818",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T09:59:56Z",
      "side": 1,
      "message": "The nextHopAddressList in vrfEntry is always populated with connected compute host\u0027s tep ip address for the given prefix. This is used (to find out remote dpn using tep ip address) to program remote fib entries. Now VpnInterfaceManager uses only single tep ip address to populate this entry. I meant how to handle this ? Are we going to add all the tep ip addresses to this nexthop list ? But vrfEntry yang model is getting changed where nexthop-address as the key (as per ecmp spec). So it has to be addressed appropriately.",
      "parentUuid": "fafc7978_bfe4d93b",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_a2a31c9d",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T11:07:35Z",
      "side": 1,
      "message": "All I need to get to the next hop is the dpn-id. I don\u0027t want to maintain the list of tep ips for each vrfEntry because of the maintenance involved whenever tunnel is added/removed from the logical group.\n\nGiven that, here are couple of suggested alternatives:\n1. add nexthop-type to routh-paths to reflect the type of netxhop-address. nexthop-type can be either ip-address or dpn-id\nThis information is also redundant since, as I mentioned before, it can be taken from odl-l3vpn:prefix-to-interface\n2. keep only one of the tep ips (randomly) in the nexthop-address and it will be used as a backup option in case the dpn-id was not found in prefix-to-interface or for cases of external tunnels.\n\n3. keep an empty nexthop-list to indicate the nexthop address will be taken based on the dpn-id from prefix-to-interface",
      "parentUuid": "fafc7978_02530818",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_2538d69f",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T12:40:04Z",
      "side": 1,
      "message": "This is not only VM prefixes, we will also have static routes which doesn\u0027t any entry in prefix-to-interface ds. I think its better to populate dpId in the nexthop-address to avoid more ds lookups to find out target dpId.",
      "parentUuid": "fafc7978_a2a31c9d",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7c3f1426",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-02T15:42:53Z",
      "side": 1,
      "message": "I added the vrf-entry changes to the yang model based on the new ECMP changes",
      "parentUuid": "fafc7978_2538d69f",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_3c73d7ea",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 175,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T06:00:18Z",
      "side": 1,
      "message": "ELAN is designed to work with single VxLAN tunnel now. But if we have getTunnelInterfaceName, getInternalOrExternalInterfaceName and getEgressActionsForInterface rpc\u0027s working as per this spec, then we are good.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_bfb6993b",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 175,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "Yes. The L2 pipeline doesn\u0027t require any code changes on the netvirt side as far as I understand.\nThanks for the confirmation",
      "parentUuid": "fafc7978_3c73d7ea",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fcf30f71",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T05:25:42Z",
      "side": 1,
      "message": "I don\u0027t think we need any changes in parent-refs. Let us make use of interface-child-info container. But this makes logical tunnel interface as parent and tunnel member interfaces as child.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_df1a7d16",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "This is different from any other interface logic genius use today.\nThe way I understand it (please correct me if I am wrong), the IFM looks up parent-ref interfaces in the config DS recursively until no parent is found and then the search continues in the oper DS until the actual lower-layer interface/OF port is found. Then the state of OF port is propagated in the opposite direction up the hierarchy.\nHow will this work if the parent of the actual tunnel would be the logical tunnel? The state of the logical tunnel needs to reflect the state of its\u0027 parent-interfaces unless I want to write a new state propagation logic just for tunnels.\n\nAm I missing something here?",
      "parentUuid": "fafc7978_fcf30f71",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_2283ac57",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T09:59:56Z",
      "side": 1,
      "message": "For cases like VLAN trunk interface, yes, the op-state is propagated from parent to child interfaces.\n\nWhen we make logical tunnel group as parent, then it\u0027s op state depends on op-state of its child-interfaces. whenever tunnel member changes its state, then it has to update its parent (i.e. logical group interface) op state. Example: making it as down when all of its members op state is down.\nThis makes yang changes too be very minimal at interface side and leveraging already existing interface-child-info model.\n\nAlso it doesn\u0027t make sense to have list of parents :)",
      "parentUuid": "fafc7978_df1a7d16",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_222c4c02",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T11:07:35Z",
      "side": 1,
      "message": "I see. That\u0027s an interesting idea but would this work in combination with OF tunnels?\nthe logical tunnel would be parent of all tunnel members and each tunnel member would be the parent of all OF tunnels? Would this hierarchy work?",
      "parentUuid": "fafc7978_2283ac57",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_255f36e7",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T12:40:04Z",
      "side": 1,
      "message": "The current ITM implmentation is just based on tunnel member with parentRef having only dpId. So its just about implementing logical tunnel group on top of member tunnels.",
      "parentUuid": "fafc7978_222c4c02",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fc2b04e9",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 238,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-02T15:42:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fafc7978_255f36e7",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5ce97b7f",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 249,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T05:25:42Z",
      "side": 1,
      "message": "weight can go inside if-tunnel augmentation.",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ffd82155",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 249,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "Sure. I will fix it",
      "parentUuid": "fafc7978_5ce97b7f",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7cff1f35",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 368,
      "author": {
        "id": 5278
      },
      "writtenOn": "2017-02-01T05:25:42Z",
      "side": 1,
      "message": "If weight is not given, then does it make each tunnel as equally distributed ?",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ffa661c0",
        "filename": "docs/specs/multiple-vxlan-tunnels.rst",
        "patchSetId": 12
      },
      "lineNbr": 368,
      "author": {
        "id": 5802
      },
      "writtenOn": "2017-02-01T08:16:38Z",
      "side": 1,
      "message": "Yes. I mentioned it in the proposed changes section line #55 but maybe not clearly enough. I will rephrase\n\n\"If weight was not defined, the bucket weight will be configured with a default value of 1\"",
      "parentUuid": "fafc7978_7cff1f35",
      "revId": "81e5945d7529a830da901a9895ebf3992ae0ec2f",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}